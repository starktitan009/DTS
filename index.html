<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTS - Truck Transport Business</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <!-- Intro Video Screen -->
    <div id="videoScreen" class="video-screen">
        <div class="video-container">
            <iframe id="introVideo" 
                    src="DTS.mp4" 
                    frameborder="0" 
                    allowfullscreen
                    allow="autoplay">
            </iframe>
        </div>
        <div class="loading-fallback hidden">
            <div class="loader"></div>
            <p>Loading DTS Transport System...</p>
        </div>
        <button id="skipVideo" class="btn btn--secondary skip-btn">Skip Video</button>
    </div>

    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen hidden">
        <div class="login-container">
            <div class="login-header">
                <h1>üöõ DTS</h1>
                <h2>Truck Transport Business</h2>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <input type="text" id="username" class="form-control" placeholder="Username" required>
                </div>
                <div class="form-group">
                    <input type="password" id="password" class="form-control" placeholder="Password" required>
                </div>
                <div class="hint">sai</div>
                <button type="submit" class="btn btn--primary btn--full-width">Login</button>
                <div id="loginError" class="error-message hidden">Invalid credentials. Please try again.</div>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="main-app hidden">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">üöõ</span>
                    <span class="logo-text">DTS TRUCKING CARGO</span>
                </div>
                <button id="sidebarToggle" class="sidebar-toggle">‚ò∞</button>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-section="dashboard">
                    <span>üìä</span> Dashboard
                </a>
                <a href="#" class="nav-item" data-section="alerts">
                    <span>‚ö†Ô∏è</span> Alerts & Reminders
                    <span class="badge" id="alertsBadge">0</span>
                </a>
                <a href="#" class="nav-item" data-section="trucks">
                    <span>üöõ</span> Trucks
                </a>
                <a href="#" class="nav-item" data-section="trips">
                    <span>üõ£Ô∏è</span> Trips
                </a>
                <a href="#" class="nav-item" data-section="drivers">
                    <span>üë§</span> Drivers
                </a>
                <a href="#" class="nav-item" data-section="documents">
                    <span>üìÑ</span> Documents
                </a>
                <a href="#" class="nav-item" data-section="emi">
                    <span>üí∞</span> Truck EMI
                </a>
                <a href="#" class="nav-item" data-section="itr">
                    <span>üìã</span> ITR
                </a>
                <a href="#" class="nav-item" data-section="alarm">
                    <span>‚è∞</span> Alarm
                </a>
                <a href="#" class="nav-item" data-section="notes">
                    <span>üìù</span> Notes
                </a>
                <a href="#" class="nav-item" data-section="about">
                    <span>‚ÑπÔ∏è</span> About Us
                </a>
            </nav>
            <button id="saveChanges" class="btn btn--primary save-btn">üíæ Save Changes</button>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <h1 id="pageTitle">Dashboard</h1>
                <div class="user-actions">
                    <span class="user-name">Welcome, Admin</span>
                    <button id="logoutBtn" class="btn btn--outline btn--sm">Logout</button>
                </div>
            </header>

            <!-- Dashboard Section -->
            <div id="dashboardSection" class="section active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üí∞</div>
                        <div class="stat-content">
                            <h3 id="totalProfit">‚Çπ0</h3>
                            <p>Total Profit</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üõ£Ô∏è</div>
                        <div class="stat-content">
                            <h3 id="totalTrips">0</h3>
                            <p>Total Trips</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üöõ</div>
                        <div class="stat-content">
                            <h3 id="activetrucks">0</h3>
                            <p>Active Trucks</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-content">
                            <h3 id="completedTrips">0</h3>
                            <p>Completed Trips</p>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="profitChart"></canvas>
                    </div>
                    <div class="chart-container" style="position: relative; height: 300px;">
                        <canvas id="tripsChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Alerts Section -->
            <div id="alertsSection" class="section hidden">
                <div class="section-header">
                    <h2>Alerts & Reminders</h2>
                    <button class="btn btn--primary" onclick="openModal('alertModal')">Add Alert</button>
                </div>
                <div id="alertsList" class="alerts-list"></div>
            </div>

            <!-- Trucks Section -->
            <div id="trucksSection" class="section hidden">
                <div class="section-header">
                    <h2>Trucks</h2>
                    <button class="btn btn--primary" onclick="openModal('truckModal')">Add Truck</button>
                </div>
                <div id="trucksList" class="trucks-grid"></div>
            </div>

            <!-- Trips Section -->
            <div id="tripsSection" class="section hidden">
                <div class="section-header">
                    <h2>Trips</h2>
                    <button class="btn btn--primary" onclick="openModal('tripModal')">Add Trip</button>
                    <button class="btn btn--secondary" onclick="exportToExcel('trips')">Export Excel</button>
                </div>
                <div id="tripsList" class="trips-list"></div>
            </div>

            <!-- Drivers Section -->
            <div id="driversSection" class="section hidden">
                <div class="section-header">
                    <h2>Drivers</h2>
                    <button class="btn btn--primary" onclick="openModal('driverModal')">Add Driver</button>
                </div>
                <div id="driversList" class="drivers-grid"></div>
            </div>

            <!-- Documents Section -->
            <div id="documentsSection" class="section hidden">
                <div class="section-header">
                    <h2>Documents</h2>
                    <button class="btn btn--primary" onclick="openModal('documentModal')">Upload Document</button>
                </div>
                <div id="documentsList" class="documents-list"></div>
            </div>

            <!-- EMI Section -->
            <div id="emiSection" class="section hidden">
                <div class="section-header">
                    <h2>Truck EMI</h2>
                    <button class="btn btn--primary" onclick="openModal('emiModal')">Add EMI Payment</button>
                </div>
                <div id="emiList" class="emi-list"></div>
            </div>

            <!-- ITR Section -->
            <div id="itrSection" class="section hidden">
                <div class="section-header">
                    <h2>Income Tax Returns</h2>
                    <button class="btn btn--primary" onclick="openModal('itrModal')">Add ITR Record</button>
                </div>
                <div id="itrList" class="itr-list"></div>
            </div>

            <!-- Alarm Section -->
            <div id="alarmSection" class="section hidden">
                <div class="section-header">
                    <h2>Alarms & Tasks</h2>
                    <button class="btn btn--primary" onclick="openModal('alarmModal')">Add Alarm</button>
                </div>
                <div id="alarmList" class="alarm-list"></div>
            </div>

            <!-- Notes Section -->
            <div id="notesSection" class="section hidden">
                <div class="section-header">
                    <h2>Notes</h2>
                    <button class="btn btn--primary" onclick="openModal('noteModal')">Add Note</button>
                    <input type="text" id="notesSearch" class="form-control" placeholder="Search notes..." style="width: 200px; margin-left: auto;">
                </div>
                <div id="notesList" class="notes-grid"></div>
            </div>

            <!-- About Section -->
            <div id="aboutSection" class="section hidden">
                <div class="section-header">
                    <h2>About Us</h2>
                </div>
                <div class="about-content">
                    <div class="card">
                        <div class="card__body">
                            <h3>DTS Trucking Cargo</h3>
                            <p>Professional truck transport business management system designed for efficient logistics operations.</p>
                            <div class="owner-profiles">
                                <h4>Owner Profile</h4>
                                <div class="profile-card">
                                    <div class="profile-avatar">üë§</div>
                                    <div class="profile-info">
                                        <h5>Damayanti</h5>
                                        <p>Business Owner</p>
                                        <p>üìû Contact: +91 9876543210</p>
                                        <p>üìß Email: damayanti@dts.com</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Alert Modal -->
    <div id="alertModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Alert</h3>
                <button class="modal-close" onclick="closeModal('alertModal')">&times;</button>
            </div>
            <form id="alertForm">
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" id="alertTitle" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="alertDescription" class="form-control" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" id="alertDate" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <select id="alertPriority" class="form-control">
                        <option value="Low">Low</option>
                        <option value="Medium">Medium</option>
                        <option value="High">High</option>
                    </select>
                </div>
                <button type="submit" class="btn btn--primary">Save Alert</button>
            </form>
        </div>
    </div>

    <!-- Truck Modal -->
    <div id="truckModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Truck</h3>
                <button class="modal-close" onclick="closeModal('truckModal')">&times;</button>
            </div>
            <form id="truckForm">
                <div class="form-group">
                    <label class="form-label">Truck Number</label>
                    <input type="text" id="truckNumber" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Type</label>
                    <input type="text" id="truckType" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Capacity</label>
                    <input type="text" id="truckCapacity" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <select id="truckStatus" class="form-control">
                        <option value="Active">Active</option>
                        <option value="Idle">Idle</option>
                        <option value="Maintenance">Maintenance</option>
                    </select>
                </div>
                <button type="submit" class="btn btn--primary">Save Truck</button>
            </form>
        </div>
    </div>

    <!-- Trip Modal -->
    <div id="tripModal" class="modal hidden">
        <div class="modal-content large">
            <div class="modal-header">
                <h3>Add Trip</h3>
                <button class="modal-close" onclick="closeModal('tripModal')">&times;</button>
            </div>
            <form id="tripForm">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Truck</label>
                        <select id="tripTruck" class="form-control" required></select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Driver</label>
                        <select id="tripDriver" class="form-control" required></select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Item Carried</label>
                    <input type="text" id="tripItem" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Weight (tons)</label>
                    <input type="text" id="tripWeight" class="form-control" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">From</label>
                        <input type="text" id="tripFrom" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">To</label>
                        <input type="text" id="tripTo" class="form-control" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="date" id="tripStartDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">End Date</label>
                        <input type="date" id="tripEndDate" class="form-control" required>
                    </div>
                </div>
                <div class="expenses-section">
                    <h4>Expenses</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Fuel (‚Çπ)</label>
                            <input type="number" id="tripFuel" class="form-control" value="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">DEF Oil (‚Çπ)</label>
                            <input type="number" id="tripDef" class="form-control" value="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Food (‚Çπ)</label>
                            <input type="number" id="tripFood" class="form-control" value="0">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Line (‚Çπ)</label>
                            <input type="number" id="tripLine" class="form-control" value="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Toll (‚Çπ)</label>
                            <input type="number" id="tripToll" class="form-control" value="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Revenue (‚Çπ)</label>
                            <input type="number" id="tripRevenue" class="form-control" required>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Remarks</label>
                    <textarea id="tripRemarks" class="form-control" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn--primary">Save Trip</button>
            </form>
        </div>
    </div>

    <!-- Driver Modal -->
    <div id="driverModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Driver</h3>
                <button class="modal-close" onclick="closeModal('driverModal')">&times;</button>
            </div>
            <form id="driverForm">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" id="driverName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Phone</label>
                    <input type="tel" id="driverPhone" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">License Number</label>
                    <input type="text" id="driverLicense" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Remarks</label>
                    <textarea id="driverRemarks" class="form-control" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn--primary">Save Driver</button>
            </form>
        </div>
    </div>

    <!-- Document Modal -->
    <div id="documentModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Upload Document</h3>
                <button class="modal-close" onclick="closeModal('documentModal')">&times;</button>
            </div>
            <form id="documentForm">
                <div class="form-group">
                    <label class="form-label">Document Name</label>
                    <input type="text" id="documentName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Document Type</label>
                    <select id="documentType" class="form-control" required>
                        <option value="">Select Type</option>
                        <option value="Insurance">Insurance</option>
                        <option value="Fitness">Fitness Certificate</option>
                        <option value="Road Tax">Road Tax</option>
                        <option value="Income Tax">Income Tax</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Truck</label>
                    <select id="documentTruck" class="form-control" required></select>
                </div>
                <div class="form-group">
                    <label class="form-label">Expiry Date</label>
                    <input type="date" id="documentExpiry" class="form-control">
                </div>
                <div class="form-group">
                    <label class="form-label">Remarks</label>
                    <textarea id="documentRemarks" class="form-control" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn--primary">Save Document</button>
            </form>
        </div>
    </div>

    <!-- EMI Modal -->
    <div id="emiModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add EMI Payment</h3>
                <button class="modal-close" onclick="closeModal('emiModal')">&times;</button>
            </div>
            <form id="emiForm">
                <div class="form-group">
                    <label class="form-label">Truck</label>
                    <select id="emiTruck" class="form-control" required></select>
                </div>
                <div class="form-group">
                    <label class="form-label">Monthly Amount (‚Çπ)</label>
                    <input type="number" id="emiAmount" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Payment Date</label>
                    <input type="date" id="emiDate" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Total EMI Amount (‚Çπ)</label>
                    <input type="number" id="emiTotal" class="form-control" required>
                </div>
                <button type="submit" class="btn btn--primary">Save EMI Payment</button>
            </form>
        </div>
    </div>

    <!-- ITR Modal -->
    <div id="itrModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add ITR Record</h3>
                <button class="modal-close" onclick="closeModal('itrModal')">&times;</button>
            </div>
            <form id="itrForm">
                <div class="form-group">
                    <label class="form-label">Financial Year</label>
                    <input type="text" id="itrYear" class="form-control" placeholder="2023-24" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Total Income (‚Çπ)</label>
                    <input type="number" id="itrIncome" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Total Expenses (‚Çπ)</label>
                    <input type="number" id="itrExpenses" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Tax Paid (‚Çπ)</label>
                    <input type="number" id="itrTax" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Remarks</label>
                    <textarea id="itrRemarks" class="form-control" rows="3"></textarea>
                </div>
                <button type="submit" class="btn btn--primary">Save ITR Record</button>
            </form>
        </div>
    </div>

    <!-- Alarm Modal -->
    <div id="alarmModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Alarm</h3>
                <button class="modal-close" onclick="closeModal('alarmModal')">&times;</button>
            </div>
            <form id="alarmForm">
                <div class="form-group">
                    <label class="form-label">Task Title</label>
                    <input type="text" id="alarmTitle" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="alarmDescription" class="form-control" rows="3"></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Date</label>
                        <input type="date" id="alarmDate" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Time</label>
                        <input type="time" id="alarmTime" class="form-control" required>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <select id="alarmPriority" class="form-control">
                        <option value="Low">Low</option>
                        <option value="Medium">Medium</option>
                        <option value="High">High</option>
                    </select>
                </div>
                <button type="submit" class="btn btn--primary">Save Alarm</button>
            </form>
        </div>
    </div>

    <!-- Note Modal -->
    <div id="noteModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Note</h3>
                <button class="modal-close" onclick="closeModal('noteModal')">&times;</button>
            </div>
            <form id="noteForm">
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" id="noteTitle" class="form-control" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Content</label>
                    <textarea id="noteContent" class="form-control" rows="6" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select id="noteCategory" class="form-control">
                        <option value="General">General</option>
                        <option value="Business">Business</option>
                        <option value="Personal">Personal</option>
                        <option value="Important">Important</option>
                    </select>
                </div>
                <button type="submit" class="btn btn--primary">Save Note</button>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
